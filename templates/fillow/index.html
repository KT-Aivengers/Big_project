{% extends 'fillow/elements/layouts/admin.html' %}
{% load static %}
        
{% block additional_css %}
{% endblock %}
		
{% block content %}
<!--**********************************
	Content body start
***********************************-->
<div class="content-body default-height">
	<!-- row -->
	<div class="container-fluid">
		<div class="row">
			<div class="col-xl-12">
				<div class="row">

					<!-- 왼쪽 영역 -->
					<div class="col-xl-6">
						<div class="row">
							<!-- 인트로 배너 -->
							<div class="col-xl-12">
								<div class="card tryal-gradient">
									<div class="card-body tryal row">
										<div class="col-xl-7 col-sm-7">
											<h2 class="mb-0">당신의 메일함을 정리해드립니다</h2>
											<span>AI에게 이메일 정리를 맡겨보세요</span>
											<!-- <a href="javascript:void(0);" class="btn btn-rounded">Try Free Now</a> -->
										</div>
										<div class="col-xl-5 col-sm-5 ">
											<img src="{% static 'fillow/images/email_sort.png' %}" alt="head" width="100%">
										</div>
									</div>
								</div>
							</div>
							<!-- 최근 이메일 -->
							<div class="col-xl-12">
								<div class="card">

									<!-- 헤더 영역 -->
									<div class="card-header pb-0 border-0">
										<div>
											<h4 class="card-title">최근 이메일</h4>
											<p class="mb-0">가장 최근에 받은 이메일을 5개까지 보여줍니다</p>
										</div>
										<div>
											<a href="{% url 'fillow:email-inbox' %}" class="btn btn-outline-primary btn-rounded">받은 이메일 함으로</a>
										</div>
									</div>
									<!-- 헤더 영역 끝 -->

									<!-- 바디 영역 -->
									<div class="card-body px-0 pt-2">

										<!-- 1 단위 -->
										<div class="d-flex justify-content-between recent-emails">
											<div class="d-flex">
												<div class="profile-k">
													<span class="bg-success">영실</span>	
												</div>
												<div class="ms-3">
													<a href="{% url 'fillow:email-inbox' %}"> <h4 class="fs-18 font-w500">일반적인 글 테스트</h4></a>
													<P class="text-black mb-0">테스트용입니다.</P>
												</div>
											</div>
											<div class="email-check">
												<label class="like-btn mb-0">
														<input type="checkbox">
														<span class="checkmark"></span>
												</label>
											</div>
										</div>
										<!-- 1 단위 끝 -->

										<div class="d-flex justify-content-between recent-emails">
											<div class="d-flex">
												<div class="profile-k">
													<img src="{% static 'fillow/images/profile/small/pic6.jpg' %}" alt="">
												</div>
												<div class="ms-3">
													<a href="{% url 'fillow:email-inbox' %}"><h4 class="fs-18 font-w500">이미지 테스트</h4></a>
													<P class="text-black mb-0">이미지 테스트용입니다.</P>

													<!-- 첨부파일 -->
													<div class="final-badge">
														<span class="badge text-black border"><i class="far fa-file-alt me-3"></i>Master_file.fig</span>
														<span class="badge text-black border"><i class="fas fa-image me-2"></i>CoverPreview.jpg</span>
														<span class="badge border bgl-primary font-w700">4 files more</span>
													</div>
													<!-- 첨부파일 끝 -->
												</div>
											</div>
											<div class="email-check">
												<label class="like-btn mb-0">
														<input type="checkbox">
														<span class="checkmark"></span>
												</label>
											</div>
										</div>

										<div class="d-flex justify-content-between recent-emails">
											<div class="d-flex">
												<div class="profile-k">
													<span class="bg-warning">G</span>	
												</div>
												<div class="ms-3">
													<a href="{% url 'fillow:email-inbox' %}"><h4 class="fs-18 font-w500">줄 바꿈 테스트</h4></a>
													<P class="text-black mb-0">줄이 길면...<br>두 줄까지 표시?</P>
												</div>
											</div>
											<div class="email-check">
												<label class="like-btn mb-0">
														<input type="checkbox">
														<span class="checkmark"></span>
												</label>
											</div>
										</div>

										<div class="d-flex justify-content-between recent-emails">
											<div class="d-flex">
												<div class="profile-k">
													<span class="bg-warning">세윤</span>
												</div>
												<div class="ms-3">
													<a href="{% url 'fillow:email-inbox' %}"><h4 class="fs-18 font-w500">안녕</h4></a>
													<P class="text-black mb-0">안녕</P>
												</div>
											</div>
											<div class="email-check">
												<label class="like-btn mb-0">
														<input type="checkbox">
														<span class="checkmark"></span>
												</label>
											</div>
										</div>

										<div class="d-flex justify-content-between recent-emails">
											<div class="d-flex">
												<div class="profile-k">
													<span class="bg-warning">성업</span>
												</div>
												<div class="ms-3">
													<a href="{% url 'fillow:email-inbox' %}"><h4 class="fs-18 font-w500">이메일 클릭시</h4></a>
													<P class="text-black mb-0">해당 이메일 자세히 보기</P>
												</div>
											</div>
											<div class="email-check">
												<label class="like-btn mb-0">
														<input type="checkbox">
														<span class="checkmark"></span>
												</label>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- 왼쪽 영역 끝 -->

					<!-- 오른쪽 영역 -->
					<div class="col-lg-6">
						<div class="col-xl-12 col-lg-12">
							<div class="row">
								<!-- 이메일 분류 현황 -->
								<div class="col-xl-6 col-xxl-12 col-sm-6">
									<div class="card">
										<div class="card-header border-0 pb-0">
											<div>
												<h4 class="card-title">이메일 분류 현황</h4>
												<p class="mb-0">이메일 분류 현황을 도식화하여 보여줍니다</p>
											</div>	
										</div>	
										<div class="card-body pb-0">
											<div id="emailchart"> </div>
											<div class="email-lagend">
												{% for label, count, color in email_count.data.zip %}
													<div class="d-flex align-items-center justify-content-between mb-3">
														<span class="fs-16 text-gray">	
															<svg class="me-2" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
																<rect width="20" height="20" rx="6" fill="{{ color }}"/>
															</svg>
															{{ label }}
														</span>
														<h5 class="mb-0 font-w600">{{ count }}</h5>
													</div>
												{% endfor %}
											</div>
										</div>
									</div>
								</div>
								<!-- 이메일 분류 현황 끝 -->

								<!-- 얼마 안 남은 회신 기한 -->
								<div class="col-xl-6 col-xxl-12 col-sm-6">
									<div class="card">
										<div class="card-header border-0 pb-0">
											<div>
												<h4 class="card-title">얼마 안 남은 회신 기한</h4>
												<p class="mb-0">회신 요청 기한이 7일 이내인 이메일을 보여줍니다</p>
											</div>
										</div>
										<div class="card-body pb-0 pt-3">

											<!-- 1단위 -->
											<div class="project-details">
												<div class="d-flex align-items-center justify-content-between">
													<div class="d-flex align-items-center">
														<div class="profile-k">
															<span class="bg-success">민석</span>	
														</div>
														<div class="ms-3">
															<h5 class="mb-1">저녁 메뉴 고르기</h5>
															<p class="mb-0">나</p>
														</div>
													</div>	
													<div class="dropdown">
														<div class="btn-link" data-bs-toggle="dropdown">
															<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
																<circle cx="12.4999" cy="3.5" r="2.5" fill="#A5A5A5"/>
																<circle cx="12.4999" cy="11.5" r="2.5" fill="#A5A5A5"/>
																<circle cx="12.4999" cy="19.5" r="2.5" fill="#A5A5A5"/>
															</svg>
														</div>
														<div class="dropdown-menu dropdown-menu-right">
															<a class="dropdown-item" href="javascript:void(0)">삭제</a>
															<a class="dropdown-item" href="javascript:void(0)">수정</a>
														</div>
													</div>
												</div>
												<h5 class="mt-3">저녁 뭐먹을까요?</h5>
												<div class="projects">
													<span class="badge badge-warning light me-3">밥</span>
													<span class="badge badge-danger light">스팸</span>
												</div>
												<div class="mt-3">
													<div class="progress default-progress">
														<div class="progress-bar bg-gradient1 progress-animated" style="width: 86%; height:5px;" role="progressbar">
															<span class="sr-only">1일 남음</span>
														</div>
													</div>
													<div class="d-flex align-items-end mt-3 justify-content-between">
														<p class="mb-0">회신 기한: 12/20/2023</p>
													</div>
												</div>
											</div>	
											<hr>
											<!-- 1 단위 끝 -->

											<div class="project-details"> 
												<div class="d-flex align-items-center justify-content-between">
													<div class="d-flex align-items-center">
														<div class="profile-k">
															<span class="bg-success">동현</span>	
														</div>
														<div class="ms-3">
															<h5 class="mb-1">성공 가능성</h5>
															<p class="mb-0">18조</p>
														</div>
													</div>	
													<div class="dropdown">
														<div class="btn-link" data-bs-toggle="dropdown">
															<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
																<circle cx="12.4999" cy="3.5" r="2.5" fill="#A5A5A5"/>
																<circle cx="12.4999" cy="11.5" r="2.5" fill="#A5A5A5"/>
																<circle cx="12.4999" cy="19.5" r="2.5" fill="#A5A5A5"/>
															</svg>
														</div>
														<div class="dropdown-menu dropdown-menu-right">
															<a class="dropdown-item" href="javascript:void(0)">삭제</a>
															<a class="dropdown-item" href="javascript:void(0)">수정</a>
														</div>
													</div>
												</div>
												<h5 class="mt-3">열심해 해봅시다!</h5>
												<div class="projects">
													<span class="badge badge-primary light me-3">우리팀</span>
													<span class="badge badge-danger light">화이팅</span>
												</div>
												<div class="mt-3">
													<div class="progress default-progress">
														<div class="progress-bar bg-gradient1 progress-animated" style="width: 100%; height:5px;" role="progressbar">
															<span class="sr-only">오늘이 회신 기한입니다.</span>
														</div>
													</div>
													<div class="d-flex align-items-end mt-3 justify-content-between">
														<p class="mb-0">회신 기한: 12/20/2022</p>
													</div>
												</div>
											</div>	
											<hr>
										</div>
										<div class="card-footer pt-0 border-0">
											<a href="javascript:void(0);" class="btn btn-outline-primary btn-rounded d-block">다른 이메일 고정하기</a>
										</div>
									</div>
								</div>
								<!-- 얼마 안 남은 회신 기한 끝 -->
							</div>	
						</div>
					<!-- 오른쪽 영역 끝 -->
				</div>
			</div>
		</div>
	</div>
</div>
<!--**********************************
	Content body end
***********************************-->
{% endblock %}
{% block additional_js %}
<script>
	// 이메일 분류 현황 함수 (사용법은 ApexCharts 검색)
	var emailchart = function(){
		var total = {{ email_count.total | safe}};
		var data = {{ email_count.data | safe }};
		var labels = data['labels'];
		var count = data['count'];

		var options = {
        	series: count,
        	chart: {
        		type: 'pie',
				height:230,
				chart: {
					fontFamily: 'Noto Sans KR, sans-serif',
					fontSize: '14px',
				},
        	},
			labels: labels,
			dataLabels:{
				enabled: false
			},
			stroke: {
				width: 0,
			},
			colors:color = [
				"#fc2e53",
				"#ffbf00",
				"#ffdc00",
				"#09bd3c",
				"#15c08c",
				"#ffa7d7",
				"#d653c1",
				"#312a2a",
				"#c8c8c8",
			],
			legend: {
				position: 'bottom',
				show: false
			},
			responsive: [{
				breakpoint: 1800,
				options: {
					chart: {
						height:200
					},
        		}
        	}]
        };

        var chart = new ApexCharts(document.querySelector("#emailchart"), options);
        chart.render();
    
	}
</script>
{% endblock %}

